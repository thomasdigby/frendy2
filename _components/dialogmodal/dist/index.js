!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.frdialogmodal=t()}(this,function(){"use strict";function e(e){function o(){var t=q?"alertdialog":"dialog";e.setAttribute("aria-hidden",!0),N.setAttribute("role",t)}function r(){e.removeAttribute("aria-hidden"),N.removeAttribute("role")}function c(){N.scrollTop=0,e.setAttribute("aria-hidden",!1),N.setAttribute("tabindex",-1),e.classList.add(B),G=i(F.join(),N),G.length?G[0].focus():N.focus(),t(b),t(m),q||t(h),P.isOpen=!0,P.emit("show")}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;e.setAttribute("aria-hidden",!0),N.removeAttribute("tabindex"),e.classList.remove(B),L(),y(),p(),t&&t.focus(),H&&(H=null),P.isOpen=!1,P.emit("hide")}function a(e){H=e.currentTarget,c()}function u(){d()}function l(e){27===e.keyCode&&d(),9===e.keyCode&&f(e)}function s(t){t.target===e&&d()}function f(e){var t=G.indexOf(document.activeElement),n=0===t||t===-1,i=t===G.length-1;n&&e.shiftKey?(G[G.length-1].focus(),e.preventDefault()):i&&!e.shiftKey&&(G[0].focus(),e.preventDefault())}function v(){J.forEach(function(e){return e.addEventListener("click",a)})}function m(){M.addEventListener("click",u)}function h(){e.addEventListener("click",s)}function b(){document.addEventListener("keydown",l)}function g(){J.forEach(function(e){return e.removeEventListener("click",a)})}function y(){M.removeEventListener("click",u)}function p(){e.removeEventListener("click",s)}function L(){document.removeEventListener("keydown",l)}function E(){r(),g(),y(),p(),L(),e.classList.remove(K),e.classList.remove(B),P.emit("destroy")}function A(){o(),v(),e.classList.add(K),t(function(){return P.emit("init")})}function k(){c()}function x(e){d(e)}var j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},w=j.closeSelector,O=void 0===w?".js-fr-dialogmodal-close":w,C=j.modalSelector,S=void 0===C?".js-fr-dialogmodal-modal":C,T=j.isAlert,q=void 0!==T&&T,D=j.readyClass,K=void 0===D?"fr-dialogmodal--is-ready":D,z=j.activeClass,B=void 0===z?"fr-dialogmodal--is-active":z;if("querySelector"in document&&"addEventListener"in window&&document.documentElement.classList&&e){var F=["[contenteditable]",'[tabindex]:not([tabindex^="-"])',"a[href]","area[href]","button:not([disabled])","embed","iframe","input:not([disabled])","object","select:not([disabled])","textarea:not([disabled])"],G=null,H=null,I=e.getAttribute("id"),J=i("[aria-controls="+I+"]"),M=i(O,e)[0],N=i(S,e)[0],P=n({init:A,destroy:E,show:k,hide:x,isOpen:!1});return A(),P}}var t=function(e){return"function"==typeof e&&setTimeout(e,0)},n=function(){function e(e,t){o[e]=o[e]||[],o[e].push(t)}function t(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=o[e];t?n.splice(n.indexOf(t),1):delete o[e]}function n(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var c=o[e];c&&c.forEach(function(e){return e.apply(t,i)})}var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],o={};return Object.assign(i,{on:e,off:t,emit:n})},i=function(e){var t=arguments.length<=1||void 0===arguments[1]?document:arguments[1];return[].slice.call(t.querySelectorAll(e))};return e});
