!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.froffcanvas=e()}(this,function(){"use strict";function t(){function t(t,e){return i[t]=i[t]||[],i[t].push(e),this}function e(t){for(var e=this,n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];var c=i[t];if(c)return c.forEach(function(t){return t.apply(e,o)}),this}var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i={};return Object.assign(n,{on:t,emit:e})}function e(e){function r(){e.setAttribute("aria-hidden",!0)}function c(){e.removeAttribute("aria-hidden",!0)}function u(){e.style.visibility="visible",e.setAttribute("aria-hidden",!1),e.setAttribute("tabindex",-1),e.focus(),i(p),i(h),i(y),i(m),e.scrollTop=0,e.classList.add(q),z.emit("show")}function s(){e.style.visibility="hidden",e.setAttribute("aria-hidden",!0),e.removeAttribute("tabindex"),e.blur(),L(),b(),E(),v(),e.classList.remove(q),z.emit("hide"),M&&M.focus()}function f(t){M=t.currentTarget,u()}function a(){s()}function d(t){t.target===e||n(t.target,"#"+e.getAttribute("id"))||s()}function l(t){27===t.keyCode&&s()}function v(){C.forEach(function(t){return t.addEventListener("click",f)})}function m(){o(w,e).forEach(function(t){return t.addEventListener("click",a)})}function y(){document.addEventListener("click",d)}function h(){document.addEventListener("keydown",l)}function p(){C.forEach(function(t){return t.removeEventListener("click",f)})}function E(){o(w,e).forEach(function(t){return t.removeEventListener("click",a)})}function b(){document.removeEventListener("click",d)}function L(){document.removeEventListener("keydown",l)}function A(){c(),p(),L(),b(),E(),e.classList.remove(q),e.classList.remove(T),e.style.visibility=""}function g(){e&&(r(),v(),e.classList.add(T),i(function(){return z.emit("init")}))}var k=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],S=(k.openSelector,k.closeSelector),w=void 0===S?".js-fr-offcanvas-close":S,x=k.readyClass,T=void 0===x?"fr-offcanvas--is-ready":x,j=k.activeClass,q=void 0===j?"fr-offcanvas--is-active":j;if("querySelector"in document&&"addEventListener"in window&&document.documentElement.classList){var C=o('[aria-controls="'+e.getAttribute("id")+'"]'),M={},z=t({init:g,destroy:A});return g(),z}}var n=function(t,e){var n=function(t,e){if(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector,"function"==typeof Element.prototype.matches)return t.matches(e);for(var n=(t.document||t.ownerDocument).querySelectorAll(e),i=0;n[i]&&n[i]!==t;)++i;return Boolean(n[i])};if("function"==typeof Element.prototype.closest)return t.closest(e);for(var i=t;i&&1===i.nodeType;){if(n(i,e))return t;i=i.parentNode}return null},i=function(t){"function"==typeof t&&setTimeout(t,0)},o=function(t){var e=arguments.length<=1||void 0===arguments[1]?document:arguments[1];return[].slice.call(e.querySelectorAll(t))};return e});
